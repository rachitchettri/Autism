<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pronunciation Level 1</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 50px;
    }
    #level {
      font-size: 1.5em;
      margin-bottom: 10px;
    }
    #word {
      font-size: 2em;
      margin-bottom: 20px;
    }
    button {
      padding: 10px 20px;
      font-size: 1.2em;
    }
    #result, #score {
      margin-top: 20px;
      font-size: 1.2em;
    }
  </style>
</head>
<body>

  <h1>üó£Ô∏è Pronunciation Level 1</h1>

  <div id="level">Level 1</div>
  <div id="word"></div>

  <button id="startBtn">Start Speaking</button>

  <div id="result"></div>
  <div id="score"></div>

  <script>
    const words = [
      "Apple", "Banana", "Cat", "Dog", "Elephant",
      "Fish", "Giraffe", "House", "Ice", "Juice",
      "Kite", "Lion", "Monkey", "Nose", "Orange",
      "Penguin", "Queen", "Rabbit", "Sun", "Tiger"
    ];

    let currentWordIndex = 0;
    let score = 0;

    const wordDiv = document.getElementById('word');
    const resultDiv = document.getElementById('result');
    const scoreDiv = document.getElementById('score');
    const startBtn = document.getElementById('startBtn');

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    if (!SpeechRecognition) {
      alert('Sorry, your browser does not support Speech Recognition.');
    } else {
      const recognition = new SpeechRecognition();
      recognition.lang = 'en-US';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      // Show the first word
      wordDiv.textContent = words[currentWordIndex];
      scoreDiv.textContent = `Score: ${score} / ${words.length}`;

      startBtn.onclick = () => {
        resultDiv.textContent = "üéôÔ∏è Listening...";
        startBtn.disabled = true; // Prevent multiple clicks
        recognition.start();
      };

      recognition.onresult = (event) => {
        const spoken = event.results[0][0].transcript.toLowerCase().trim();
        const confidence = event.results[0][0].confidence;
        const targetWord = words[currentWordIndex].toLowerCase();

        console.log(`You said: ${spoken} (Confidence: ${confidence})`);

        if (spoken === targetWord) {
          resultDiv.innerHTML = `‚úÖ Correct! You said "${spoken}".<br>Confidence: ${(confidence * 100).toFixed(2)}%`;
          score++;
        } else {
          resultDiv.innerHTML = `‚ùå Incorrect! You said "${spoken}".<br>Correct word: "${targetWord}".`;
        }

        scoreDiv.textContent = `Score: ${score} / ${words.length}`;

        currentWordIndex++;
        if (currentWordIndex < words.length) {
          setTimeout(() => {
            wordDiv.textContent = words[currentWordIndex];
            resultDiv.textContent = "";
            startBtn.disabled = false;
          }, 2000);
        } else {
          resultDiv.innerHTML += `<br>üéâ Level 1 Complete!<br>Final Score: ${score} / ${words.length}`;
          startBtn.disabled = true;
        }
      };

      recognition.onerror = (event) => {
        resultDiv.textContent = 'Error: ' + event.error;
        startBtn.disabled = false; // Re-enable in case of error
      };
    }
  </script>

</body>
</html>
